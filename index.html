<script>
    const urlParams = new URLSearchParams(window.location.search);

    if (!urlParams.get('phone')) {
        let errMsg = 'Not found "phone" in GET-params.';
        console.error(errMsg);

        let helpMsg = 'Не указан (или указан неверно) номер телефона для звонка!\n\nПример правильной ссылки:';
        let linkExample = 'https://' + window.location.hostname + '/callto?phone=89051234567';
        prompt(helpMsg, linkExample);

        window.close();
    } else {
        window.location.href = 'sip://' + urlParams.get('phone');
        setTimeout(function() {
            window.open('', '_self');
            window.close();
        }, urlParams.get('wait') ?? 3000);
    }
</script>